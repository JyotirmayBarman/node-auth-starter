var H=Object.defineProperty,I=Object.defineProperties;var q=Object.getOwnPropertyDescriptors;var C=Object.getOwnPropertySymbols;var D=Object.prototype.hasOwnProperty,O=Object.prototype.propertyIsEnumerable;var L=(s,t,n)=>t in s?H(s,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):s[t]=n,k=(s,t)=>{for(var n in t||(t={}))D.call(t,n)&&L(s,n,t[n]);if(C)for(var n of C(t))O.call(t,n)&&L(s,n,t[n]);return s},$=(s,t)=>I(s,q(t));import{r as u,o as d,c as j,a as z,b as G,d as m,e,t as U,n as S,m as P,f as M,g as c,w as h,h as b,i as l,v as y,F as J,p as R,j as E,k as w,l as p,q as Y,s as V,u as K,x as W,y as Q,z as X}from"./vendor.05e198d4.js";const Z=function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))f(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&f(i)}).observe(document,{childList:!0,subtree:!0});function n(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerpolicy&&(a.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?a.credentials="include":o.crossorigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function f(o){if(o.ep)return;o.ep=!0;const a=n(o);fetch(o.href,a)}};Z();var x=(s,t)=>{for(const[n,f]of t)s[n]=f;return s};const ee={};function se(s,t){const n=u("router-view");return d(),j(n)}var te=x(ee,[["render",se]]);const T=z.create({headers:{"Content-Type":"application/json"}});T.defaults.withCredentials=!0;var oe={namespaced:!0,state:{user:null,authenticated:!1,init:!0},mutations:{SET_USER(s,t){s.user=t},SET_AUTH(s,t){s.authenticated=t}},actions:{async vuexLogin({state:s,dispatch:t}){s.init&&(s.init=!1,await t("fetchUser"))},async vuexLogout({state:s,commit:t}){s.authenticated&&(t("SET_USER",null),t("SET_TOKEN",null),t("SET_AUTH",!1))},async fetchUser({commit:s}){try{const t=await T.get("/api/v1/auth/user");s("SET_USER",t.data.user),s("SET_AUTH",!0)}catch(t){console.log(t)}}},getters:{getUser(s){return s.user},getAuthenticated(s){return s.authenticated}}},A=G({state:{},mutations:{},actions:{},getters:{},modules:{auth:oe}});const re={props:{msg:{type:String,default:"Your message"},success:{type:Boolean,default:!0}}},ne={class:"flex justify-center items-center"},ae=e("div",{class:"border-r px-2"},[e("svg",{class:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})])],-1),ie={class:"flex items-center px-2 py-3"},le={class:"mx-3"},ce={id:"msg"};function de(s,t,n,f,o,a){return d(),m("div",ne,[e("div",{id:"toast",class:S(["flex flex-row h-min p-2 uppercase items-center text-white min-w-min shadow-md rounded-lg overflow-hidden mx-auto",{"bg-red-500":!n.success,"bg-green-500":n.success}])},[ae,e("div",ie,[e("div",le,[e("p",ce,U(n.msg),1)])])],2)])}var v=x(re,[["render",de]]);const ue={data(){return{msg:"",success:!1,show:!1}},computed:$(k({},P({getUser:"auth/getUser",getAuthenticated:"auth/getAuthenticated"})),{getName(){return this.getUser?this.getUser.firstName+" "+this.getUser.lastName:this.fullName},getAuth(){return!!this.getAuthenticated}}),components:{Toast:v},methods:$(k({},M({vuexLogout:"auth/vuexLogout"})),{async logout(){try{const s=await this.axios.post("/api/v1/auth/logout");this.vuexLogout(),this.toast(s.data.message)}catch(s){console.log(s),s.response?this.toast(s.response.data.error):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}})},B=s=>(R("data-v-cd526940"),s=s(),E(),s),me={class:"flex justify-between mt-10 max-w-7xl my-0 mx-auto"},he={class:"p-4"},pe=w("node-boilerplate"),_e={class:"flex flex-row"},fe=w("Auth"),ge={key:1,id:"authenticated",class:"dropdown inline-block relative"},we={class:"flex text-black-900 font-semibold py-2 px-4 items-center"},xe={class:"mr-1",id:"username"},ve=B(()=>e("svg",{class:"fill-current h-4 w-4",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20"},[e("path",{d:"M9.293 12.95l.707.707L15.657 8l-1.414-1.414L10 10.828 5.757 6.586 4.343 8z"})],-1)),be={class:"dropdown-menu absolute top-10 w-40 hidden"},ye={class:""},ke={class:""},$e={class:"mt-52"},Ae=B(()=>e("h1",null,"Node-Auth-Starter",-1)),je=w("Documentation"),Ue={class:"mt-80"};function Te(s,t,n,f,o,a){const i=u("router-link"),g=u("Toast");return d(),m(J,null,[e("nav",me,[e("div",he,[c(i,{to:{name:"Home"},class:"text-lg font-semibold tracking-widest text-black-900 uppercase rounded-lg"},{default:h(()=>[pe]),_:1})]),e("div",_e,[a.getAuth?(d(),m("div",ge,[e("button",we,[e("span",xe,U(a.getName),1),ve]),e("ul",be,[e("li",ye,[e("p",{onClick:t[0]||(t[0]=b(r=>s.$router.push({name:"MyAccount"}),["prevent"])),class:"cursor-pointer bg-gray-300 hover:bg-gray-500 hover:text-white text-center py-2 px-4 block whitespace-no-wrap"},"My Account")]),e("li",ke,[e("p",{onClick:t[1]||(t[1]=b((...r)=>a.logout&&a.logout(...r),["prevent"])),class:"cursor-pointer bg-gray-300 hover:bg-gray-500 hover:text-white text-center py-2 px-4 block whitespace-no-wrap"},"Log out")])])])):(d(),j(i,{key:0,to:{name:"Auth"},id:"auth",class:"px-4 py-2 text-sm font-semibold text-gray-900 bg-gray-200 rounded-lg mr-2 hover:bg-gray-400"},{default:h(()=>[fe]),_:1}))])]),e("div",$e,[Ae,c(i,{to:"https://github.com/JyotirmayBarman/node-boilerplate",class:"px-4 mt-8 py-2 text-sm font-semibold text-gray-900 bg-gray-200 rounded-lg mr-2 hover:bg-gray-400"},{default:h(()=>[je]),_:1})]),e("div",Ue,[l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])],64)}var Ne=x(ue,[["render",Te],["__scopeId","data-v-cd526940"]]);const Ce={},Le={class:"w-2/3 flex flex-col items-center mx-auto justify-center h-1/2"},Se={class:"mt-20"},Pe=e("h3",{class:"text-center text-primary text-3xl font-bold my-2"},"Authentication made simple",-1),Me=e("p",{class:"text-center my-2 mb-8"},"Choose your action",-1),Re={class:"w-full rounded-lg mt-2 mb-3 text-blue-800 flex justify-center"},Ee={class:"mb-1 mr-3"},Ve=w("Login"),Be={class:"mb-1 mr-3"},Fe=w("Register"),He={class:"mb-1 mr-3"},Ie=w("Resend Verification"),qe={class:"mb-1 mr-3"},De=w("Forgot Password"),Oe={class:"flex justify-center"},ze=w("Back to home");function Ge(s,t){const n=u("router-link");return d(),m("div",Le,[e("div",Se,[Pe,Me,e("ul",Re,[e("li",Ee,[c(n,{to:{name:"Login"},class:"w-fill flex p-3 pl-3 bg-gray-100 hover:bg-gray-200 rounded-lg"},{default:h(()=>[Ve]),_:1})]),e("li",Be,[c(n,{to:{name:"Register"},class:"w-fill flex p-3 pl-3 bg-gray-100 hover:bg-gray-200 rounded-lg"},{default:h(()=>[Fe]),_:1})]),e("li",He,[c(n,{to:{name:"ResendEmail"},class:"w-fill flex p-3 pl-3 bg-gray-100 hover:bg-gray-200 rounded-lg"},{default:h(()=>[Ie]),_:1})]),e("li",qe,[c(n,{to:{name:"ForgotPassword"},class:"w-fill flex p-3 pl-3 bg-gray-100 hover:bg-gray-200 rounded-lg"},{default:h(()=>[De]),_:1})])]),e("div",Oe,[c(n,{to:{name:"Home"},class:"w-fill justify-center p-3 pl-3 bg-blue-500 hover:bg-blue-200 rounded-lg text-white text-center"},{default:h(()=>[ze]),_:1})])])])}var Je=x(Ce,[["render",Ge]]);const Ye={data(){return{email:"",password:"",show:!1,remember:!1,success:!1,msg:""}},components:{Toast:v},methods:$(k({},M({fetchUser:"auth/fetchUser"})),{async login(){try{const s=await this.axios.post("/api/v1/auth/login",{email:this.email,password:this.password,remember:this.remember});this.fetchUser(),this.success=!0,this.toast(s.data.message),setTimeout(()=>{this.$router.push({name:"Home"})},2e3)}catch(s){this.success=!1,console.log(s),s.response?(console.log(s.response),this.toast(s.response.data.error)):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}})},Ke={class:"flex flex-col items-center justify-center"},We={class:"bg-white w-full h-3/4 mt-52 mb-20"},Qe={class:"flex h-3/4 justify-center items-center"},Xe=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})]),e("span",{class:"ml-2"},"Back to authentication")],-1),Ze={class:"w-80"},es=e("div",null,[e("span",{class:"text-sm text-gray-900"},"Welcome back"),e("h1",{class:"text-2xl font-bold"},"Login to your account")],-1),ss={class:"my-3"},ts=e("label",{class:"block text-md mb-2",for:"email"},"Email",-1),os={class:"mt-5"},rs=e("label",{class:"block text-md mb-2",for:"password"},"Password",-1),ns={class:"flex justify-between mt-2"},as=e("span",{class:"text-sm ml-2"},"Remember Me",-1),is=w("Forgot password?"),ls={class:""},cs={class:"mt-8"},ds=w(" Dont have an account? "),us=w("Join free today");function ms(s,t,n,f,o,a){const i=u("router-link"),g=u("Toast");return d(),m("div",Ke,[e("div",We,[e("div",Qe,[e("div",null,[c(i,{to:{name:"Auth"},class:"w-fill flex mb-5 rounded-lg text-black text-center"},{default:h(()=>[Xe]),_:1}),e("form",Ze,[es,e("div",ss,[ts,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.email=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"email",name:"password",placeholder:"john@doe.com"},null,512),[[p,o.email]])]),e("div",os,[rs,l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.password=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"password",name:"password",placeholder:"********"},null,512),[[p,o.password]])]),e("div",ns,[e("div",null,[l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.remember=r),class:"cursor-pointer",type:"checkbox",name:"rememberme"},null,512),[[Y,o.remember]]),as]),c(i,{to:{name:"ForgotPassword"},class:"text-sm text-blue-700 hover:underline cursor-pointer"},{default:h(()=>[is]),_:1})]),e("div",ls,[e("button",{onClick:t[3]||(t[3]=b((...r)=>a.login&&a.login(...r),["prevent"])),class:"mt-4 mb-3 w-full bg-green-500 hover:bg-green-400 text-white py-2 rounded-md transition duration-100"},"Login")])]),e("p",cs,[ds,c(i,{to:{name:"Register"},class:"cursor-pointer text-sm text-blue-600"},{default:h(()=>[us]),_:1})])])])]),l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var hs=x(Ye,[["render",ms]]);const ps={data(){return{firstName:"",lastName:"",email:"",password:"",confirmPassword:"",show:!1,success:!1,error:!1,msg:"s"}},components:{Toast:v},methods:{async register(){try{const s=await this.axios.post("/api/v1/auth/register",{firstName:this.firstName,lastName:this.lastName,email:this.email,password:this.password,confirmPassword:this.confirmPassword});this.success=!0,this.toast(s.data.message),setTimeout(()=>{this.$router.push({name:"Home"})},2e3)}catch(s){this.success=!1,console.log(s),s.response?this.toast(s.response.data.error):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}}},_s={class:"flex flex-col items-center justify-center"},fs={class:"bg-white w-full mt-52 mb-20"},gs={class:"flex h-3/4 justify-center items-center"},ws=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-wv-modelth":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})]),e("span",{class:"ml-2"},"Back to authentication")],-1),xs={class:"w-80"},vs=e("div",null,[e("span",{class:"text-sm text-gray-900"},"Join the community"),e("h1",{class:"text-2xl font-bold"},"Register for an account")],-1),bs={class:"my-3"},ys=e("label",{class:"block text-md mb-2",for:"firstname"},"First Name",-1),ks={class:"my-3"},$s=e("label",{class:"block text-md mb-2",for:"lastname"},"Last Name",-1),As={class:"my-3"},js=e("label",{class:"block text-md mb-2",for:"email"},"Email",-1),Us={class:"mt-5"},Ts=e("label",{class:"block text-md mb-2",for:"password"},"Password",-1),Ns={class:"mt-5"},Cs=e("label",{class:"block text-md mb-2",for:"confirm_password"},"Confirm Password",-1),Ls={class:""},Ss={class:"mt-8"},Ps=w(" Already have an account? "),Ms=w("Login now");function Rs(s,t,n,f,o,a){const i=u("router-link"),g=u("Toast");return d(),m("div",_s,[e("div",fs,[e("div",gs,[e("div",null,[c(i,{to:{name:"Auth"},class:"w-fill flex mb-5 rounded-lg text-black text-center"},{default:h(()=>[ws]),_:1}),e("form",xs,[vs,e("div",bs,[ys,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.firstName=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"text",name:"password",placeholder:"john"},null,512),[[p,o.firstName]])]),e("div",ks,[$s,l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.lastName=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"text",name:"password",placeholder:"doe"},null,512),[[p,o.lastName]])]),e("div",As,[js,l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.email=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"email",name:"password",placeholder:"john@doe.com"},null,512),[[p,o.email]])]),e("div",Us,[Ts,l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.password=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"password",name:"password",placeholder:"********"},null,512),[[p,o.password]])]),e("div",Ns,[Cs,l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.confirmPassword=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"password",name:"password",placeholder:"********"},null,512),[[p,o.confirmPassword]])]),e("div",Ls,[e("button",{onClick:t[5]||(t[5]=b((...r)=>a.register&&a.register(...r),["prevent"])),class:"mt-4 mb-3 w-full bg-green-500 hover:bg-green-400 text-white py-2 rounded-md transition duration-100"},"Register")])]),e("p",Ss,[Ps,c(i,{to:{name:"Login"},class:"cursor-pointer text-sm text-blue-600"},{default:h(()=>[Ms]),_:1})])])])]),l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var Es=x(ps,[["render",Rs]]);const Vs={components:{Toast:v},data(){return{email:"",success:!1,show:!1,msg:"Something error occured"}},methods:{async forgot(){try{const s=await this.axios.post("/api/v1/auth/reset",{email:this.email});this.success=!0,this.toast(s.data.message),setTimeout(()=>{this.toast("Reset & login now")},2e3),setTimeout(()=>{this.$router.push({name:"Login"})},3e3)}catch(s){console.log(s),this.success=!1,s.response?this.toast(s.response.data.error):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}}},Bs={class:"flex flex-col items-center justify-center"},Fs={class:"bg-white w-full mt-52 mb-20"},Hs={class:"flex h-3/4 justify-center items-center"},Is=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})]),e("span",{class:"ml-2"},"Back to authentication")],-1),qs={class:"w-80"},Ds=e("div",null,[e("span",{class:"text-sm text-gray-900"},"Reset password"),e("h1",{class:"text-2xl font-bold"},"Get password reset link")],-1),Os={class:"my-3"},zs=e("label",{class:"block text-md mb-2",for:"email"},"Email",-1),Gs={class:""};function Js(s,t,n,f,o,a){const i=u("router-link"),g=u("toast");return d(),m("div",Bs,[e("div",Fs,[e("div",Hs,[e("div",null,[c(i,{to:{name:"Auth"},class:"w-fill flex mb-5 rounded-lg text-black text-center"},{default:h(()=>[Is]),_:1}),e("form",qs,[Ds,e("div",Os,[zs,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.email=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"email",name:"password",placeholder:"john@doe.com"},null,512),[[p,o.email]])]),e("div",Gs,[e("button",{onClick:t[1]||(t[1]=b((...r)=>a.forgot&&a.forgot(...r),["prevent"])),class:"mt-4 mb-3 w-full bg-green-500 hover:bg-green-400 text-white py-2 rounded-md transition duration-100"},"Get")])])])])]),l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var Ys=x(Vs,[["render",Js]]);const Ks={components:{Toast:v},data(){return{email:"",show:!1,success:!1,msg:"Somethig error occured"}},methods:{async resend(){try{const s=await this.axios.post("/api/v1/auth/resend",{email:this.email});this.success=!0,this.toast(s.data.message),setTimeout(()=>{this.toast("Verify & login now")},2e3),setTimeout(()=>{this.$router.push({name:"Login"})},3e3)}catch(s){this.success=!1,s.response?this.toast(s.response.data.error):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}}},Ws={class:"flex flex-col items-center justify-center"},Qs={class:"bg-white w-full mt-52 mb-20"},Xs={class:"flex h-3/4 justify-center items-center"},Zs=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})]),e("span",{class:"ml-2"},"Back to authentication")],-1),et={class:"w-80"},st=e("div",null,[e("span",{class:"text-sm text-gray-900"},"Resend Verification Link"),e("h1",{class:"text-2xl font-bold"},"Get your account verified")],-1),tt={class:"my-3"},ot=e("label",{class:"block text-md mb-2",for:"email"},"Email",-1),rt={class:""};function nt(s,t,n,f,o,a){const i=u("router-link"),g=u("toast");return d(),m("div",Ws,[e("div",Qs,[e("div",Xs,[e("div",null,[c(i,{to:{name:"Auth"},class:"w-fill flex mb-5 rounded-lg text-black text-center"},{default:h(()=>[Zs]),_:1}),e("form",et,[st,e("div",tt,[ot,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.email=r),class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"email",name:"password",placeholder:"john@doe.com"},null,512),[[p,o.email]])]),e("div",rt,[e("button",{onClick:t[1]||(t[1]=b((...r)=>a.resend&&a.resend(...r),["prevent"])),class:"mt-4 mb-3 w-full bg-green-500 hover:bg-green-400 text-white py-2 rounded-md transition duration-100"},"Resend")])])])])]),l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var at=x(Ks,[["render",nt]]);const it={components:{Toast:v},data(){return{newPassword:"",confirmPassword:"",success:!1,token:null,show:!1,msg:"Somethig error occured"}},methods:{async reset(){try{const s=await this.axios.patch(`/api/v1/auth/reset/${this.token}`,{password:this.newPassword,confirmPassword:this.confirmPassword});this.success=!0,this.toast(s.data.message),setTimeout(()=>{this.$router.push({name:"Login"})},1e3)}catch(s){console.log(s),this.error=!0,this.success=!1,s.response?this.toast(s.response.data.error):this.toast()}},toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}},mounted(){const s=this.$route.query.token;s?this.token=s:this.$router.push({name:"Home"})}},lt={class:"flex flex-col items-center justify-center"},ct={class:"bg-white w-full mt-52 mb-20"},dt={class:"flex h-3/4 justify-center items-center"},ut=e("div",{class:"flex"},[e("svg",{xmlns:"http://www.w3.org/2000/svg",class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 16l-4-4m0 0l4-4m-4 4h18"})]),e("span",{class:"ml-2"},"Back to authentication")],-1),mt={class:"w-80"},ht=e("div",null,[e("span",{class:"text-sm text-gray-900"},"Reset Password"),e("h1",{class:"text-2xl font-bold"},"Reset token sent to your mail")],-1),pt={class:"mt-5"},_t=e("label",{class:"block text-md mb-2",for:"password"},"New Password",-1),ft={class:"mt-5"},gt=e("label",{class:"block text-md mb-2",for:"confirm_password"},"Confirm Password",-1),wt={class:""};function xt(s,t,n,f,o,a){const i=u("router-link"),g=u("toast");return d(),m("div",lt,[e("div",ct,[e("div",dt,[e("div",null,[c(i,{to:{name:"Auth"},class:"w-fill flex mb-5 rounded-lg text-black text-center"},{default:h(()=>[ut]),_:1}),e("form",mt,[ht,e("div",pt,[_t,l(e("input",{"onUpdate:modelValue":t[0]||(t[0]=r=>o.newPassword=r),id:"password",class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"password",name:"password",placeholder:"********"},null,512),[[p,o.newPassword]])]),e("div",ft,[gt,l(e("input",{"onUpdate:modelValue":t[1]||(t[1]=r=>o.confirmPassword=r),id:"confirmPassword",class:"px-4 w-full border-2 py-2 rounded-md text-sm outline-none",type:"password",name:"password",placeholder:"********"},null,512),[[p,o.confirmPassword]])]),e("div",wt,[e("button",{onClick:t[2]||(t[2]=b((...r)=>a.reset&&a.reset(...r),["prevent"])),class:"mt-4 mb-3 w-full bg-green-500 hover:bg-green-400 text-white py-2 rounded-md transition duration-100"},"Reset Password")])])])])]),l(c(g,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var vt=x(it,[["render",xt]]);const bt={components:{Toast:v},props:{token:{type:String,required:!0}},data(){return{error:!1,msg:"Something error occured",success:!1,show:!1}},methods:{toast(s="Somethig error occured"){this.msg=s,this.show=!0,setTimeout(()=>{this.show=!1},1e3)}},async mounted(){const s=this.$route.query.token;s||this.$router.push({name:"Home"}),console.log(s);try{const t=await this.axios.post(`/api/v1/auth/verify/${s}`);console.log(t),this.success=!0,this.toast(t.data.message),setTimeout(()=>{this.$router.push({name:"Login"})},4e3)}catch(t){console.log(t.response),this.success=!1,this.error=!0,t.response?this.toast(t.response.data.error):this.toast()}}},yt={class:"flex flex-col items-center justify-center"},kt={class:"flex justify-center items-center mt-64 mb-20"},$t={class:"text-center"};function At(s,t,n,f,o,a){const i=u("toast");return d(),m("div",yt,[e("div",kt,[e("div",$t,[e("p",{class:S(["mb-10 text-2xl",{"text-red-600":!o.success,"text-green-600":o.success}])},U(o.msg),3)])]),l(c(i,{msg:o.msg,success:o.success},null,8,["msg","success"]),[[y,o.show]])])}var jt=x(bt,[["render",At]]);const Ut={components:{Toast:v},data(){return{user:{_id:"",firstName:"",lastName:"",email:"",bio:"",avatar:"",password:""},show:!1,toast:!1,loading:!1,success:!1,newAvatar:null,avatarSrc:null,msg:"Something went wrong"}},computed:$(k({},P({getUser:"auth/getUser"})),{getAvatar(){return this.newAvatar?this.avatarSrc:this.user.avatar?this.user.avatar:this.user.firstName?`https://avatars.dicebear.com/api/bottts/${this.user.firstName[0].toLowerCase()}${this.user.lastName[0].toLowerCase()}.svg`:"https://avatars.dicebear.com/api/bottts/user.svg"}}),methods:{async update(){this.loading=!0;try{let s=this.generateFormData();this.newAvatar&&s.append("avatar",this.newAvatar);const t=await this.axios.patch("/api/v1/auth/update",s);this.loading=!1,this.msg=t.data.message,this.success=!0,this.toast=!0,setTimeout(()=>{this.success=!1,this.toast=!1},1e3)}catch(s){this.loading=!1,this.toast=!0,this.msg=s.response.data.error,setTimeout(()=>{this.toast=!1},1e3)}},generateFormData(){let s=new FormData;return Object.keys(this.user).forEach(t=>{this.user[t]!=""&&(s.append(t,this.user[t]),console.log(this.user[t]))}),s},loadImage(s){const t=["image/jpg","image/jpeg","image/png"];let n=s.target.files[0];t.includes(n.type)&&(this.newAvatar=n,this.avatarSrc=URL.createObjectURL(n))},clearImg(){this.newAvatar=null,this.$refs.imageUpload.value=null},openFile(){this.$refs.imageUpload.click()}},mounted(){const s=this.getUser;Object.keys(s).forEach(t=>{s[t]&&(this.user[t]=s[t])})}},_=s=>(R("data-v-285eadba"),s=s(),E(),s),Tt={class:"account max-w-5xl mx-auto"},Nt=_(()=>e("svg",{class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 19l-7-7m0 0l7-7m-7 7h18"})],-1)),Ct=_(()=>e("p",{class:"ml-4"},"Go back to home",-1)),Lt=_(()=>e("h3",{class:"my-8 font-bold uppercase"},"Your Profile Details",-1)),St={class:"profile-image flex items-center mt-4"},Pt={class:"w-24 h-24 rounded-full border-4 flex items-center justify-center"},Mt=["src"],Rt={class:"image-upload ml-4"},Et={class:"name flex justify-between mt-4"},Vt={class:"first-name flex flex-col w-48-per"},Bt=_(()=>e("label",{for:"first-name"},"First Name",-1)),Ft={class:"last-name flex flex-col w-48-per"},Ht=_(()=>e("label",{for:"last-name"},"Last Name",-1)),It={class:"email flex flex-col mt-4"},qt=_(()=>e("label",{for:"email"},"Email",-1)),Dt={class:"flex flex-col mt-4"},Ot=_(()=>e("label",{for:"bio"},"BIO",-1)),zt={class:"new flex flex-col mt-4 relative"},Gt=_(()=>e("label",{for:"new_password"},"Password *",-1)),Jt=["type"],Yt={key:0,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Kt=_(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"},null,-1)),Wt=_(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"},null,-1)),Qt=[Kt,Wt],Xt={key:1,class:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},Zt=_(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"},null,-1)),eo=[Zt],so={key:0,style:{margin:"auto",display:"block","shape-rendering":"auto"},width:"40px",height:"24px",viewBox:"0 0 100 100",preserveAspectRatio:"xMidYMid"},to=_(()=>e("circle",{cx:"50",cy:"50",fill:"none",stroke:"#fff","stroke-width":"12",r:"45","stroke-dasharray":"164.93361431346415 56.97787143782138"},[e("animateTransform",{attributeName:"transform",type:"rotate",repeatCount:"indefinite",dur:"1s",values:"0 50 50;360 50 50",keyTimes:"0;1"})],-1)),oo=[to],ro={key:1,style:{margin:"auto",display:"block","shape-rendering":"auto"},class:"h-6 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor"},no=_(()=>e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"3",d:"M5 13l4 4L19 7"},null,-1)),ao=_(()=>e("animateTransform",{attributeName:"transform",type:"scale",repeatCount:"once",dur:"1s",values:"0;1.5;",keyTimes:"0;1"},null,-1)),io=[no,ao],lo={key:2};function co(s,t,n,f,o,a){const i=u("router-link"),g=u("toast");return d(),m("div",Tt,[c(i,{to:{name:"Home"},href:"/",class:"back flex mt-8"},{default:h(()=>[Nt,Ct]),_:1}),Lt,e("div",St,[e("div",Pt,[a.getAvatar?(d(),m("img",{key:0,class:"block rounded-full border-none h-full w-full object-cover outline-none",src:a.getAvatar},null,8,Mt)):V("",!0)]),e("div",Rt,[e("input",{ref:"imageUpload",class:"hidden",type:"file",onChange:t[0]||(t[0]=(...r)=>a.loadImage&&a.loadImage(...r))},null,544),e("div",{class:"w-40 h-8 cursor-pointer border-2 flex justify-center items-center hover:bg-gray-200",onClick:t[1]||(t[1]=(...r)=>a.openFile&&a.openFile(...r))},"Upload Image")])]),e("div",Et,[e("div",Vt,[Bt,l(e("input",{"onUpdate:modelValue":t[2]||(t[2]=r=>o.user.firstName=r),class:"input",type:"text",id:"first-name"},null,512),[[p,o.user.firstName]])]),e("div",Ft,[Ht,l(e("input",{"onUpdate:modelValue":t[3]||(t[3]=r=>o.user.lastName=r),class:"input",type:"text",id:"last-name"},null,512),[[p,o.user.lastName]])])]),e("div",It,[qt,l(e("input",{"onUpdate:modelValue":t[4]||(t[4]=r=>o.user.email=r),class:"input",type:"email",id:"email"},null,512),[[p,o.user.email]])]),e("div",Dt,[Ot,l(e("textarea",{"onUpdate:modelValue":t[5]||(t[5]=r=>o.user.bio=r),name:"bio",class:"input resize-none",id:"bio",cols:"30",rows:"10"},null,512),[[p,o.user.bio]])]),e("div",zt,[Gt,l(e("input",{"onUpdate:modelValue":t[6]||(t[6]=r=>o.user.password=r),class:"input",type:o.show?"text":"password",id:"new_password"},null,8,Jt),[[K,o.user.password]]),e("div",{class:"view-password absolute right-4 top-10 cursor-pointer",onClick:t[7]||(t[7]=r=>o.show=!o.show)},[o.show?(d(),m("svg",Xt,eo)):(d(),m("svg",Yt,Qt))])]),e("button",{class:"btn",onClick:t[8]||(t[8]=(...r)=>a.update&&a.update(...r))},[o.loading?(d(),m("svg",so,oo)):!o.loading&&o.success?(d(),m("svg",ro,io)):(d(),m("span",lo,"Update Profile"))]),o.toast?(d(),j(g,{key:0,class:"mt-8",msg:o.msg,success:o.success},null,8,["msg","success"])):V("",!0)])}var uo=x(Ut,[["render",co],["__scopeId","data-v-285eadba"]]);const mo=[{path:"/",name:"Home",component:Ne},{path:"/auth",name:"Auth",component:Je,meta:{requiresAuth:!1}},{path:"/auth/login",name:"Login",component:hs,meta:{requiresAuth:!1}},{path:"/auth/register",name:"Register",component:Es,meta:{requiresAuth:!1}},{path:"/auth/forgot",name:"ForgotPassword",component:Ys},{path:"/auth/resend",name:"ResendEmail",component:at},{path:"/auth/reset",name:"ResetPassword",component:vt,props:!0},{path:"/auth/verify",name:"VerifyEmail",component:jt,props:!0},{path:"/myaccount",name:"MyAccount",component:uo,meta:{requiresAuth:!0}}],F=W({history:Q(),routes:mo});F.beforeEach(async(s,t,n)=>{if(await await A.dispatch("auth/vuexLogin"),s.meta.requiresAuth==!1)return A.getters["auth/getAuthenticated"]?n({name:"MyAccount"}):n();if(s.meta.requiresAuth==!0)return A.getters["auth/getAuthenticated"]?n():n({name:"Login"});n()});const N=X(te);N.config.globalProperties.axios=T;N.use(A).use(F);N.mount("#app");
